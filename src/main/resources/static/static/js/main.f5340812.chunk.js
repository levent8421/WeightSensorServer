(this.webpackJsonpweight_slot_app=this.webpackJsonpweight_slot_app||[]).push([[0],{152:function(e,t,n){e.exports=n(302)},157:function(e,t,n){},158:function(e,t,n){},214:function(e,t,n){},251:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},280:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),s=n.n(r),c=(n(157),n(8)),i=n(9),l=n(11),u=n(10),h=(n(158),n(57)),m=n(24),p=n(2),d={showTabBar:!0,enableTabBar:!1,showHeader:!0,globalTitle:"\u91cd\u529b\u8d27\u9053",routerPath:null,dashboardSlots:[],sensors:[],connections:[],user:{name:"MonolithIoT"}},f={},v=function(e,t){f[e]=t};v("tabBar.set",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{showTabBar:t.data})})),v("router.path.set",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{routerPath:t.data})})),v("dashboard.slot_data.fetch.async",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{dashboardSlots:t.data})})),v("title.set",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{globalTitle:t.data})})),v("sensors.fetch.async",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{sensors:t.data})})),v("sensor.elabel.toggle",(function(e,t){var n,a=e.sensors,o=t.data.sensorId,r=t.data.hasElabel,s=Object(m.a)(a);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.id===o){c.hasElable=r;break}}}catch(i){s.e(i)}finally{s.f()}return Object(p.a)(Object(p.a)({},e),{},{sensors:JSON.parse(JSON.stringify(a))})})),v("connections.fetch.async",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{connections:t.data})})),v("connection.delete",(function(e,t){var n=t.data.id,a=e.connections.filter((function(e){return e.id!==n}));return Object(p.a)(Object(p.a)({},e),{},{connections:a})})),v("system.tabBar.set",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{enableTabBar:t.data})})),v("system.header.set",(function(e,t){return Object(p.a)(Object(p.a)({},e),{},{showHeader:t.data})}));var b=n(139),y=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):h.c)(Object(h.a)(b.a)),E=Object(h.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n in f){var a=f[n];return a(e,t)}return e}),y),S=n(17),k=(n(163),n(58)),g=n.n(k),O=(n(214),n(22)),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={path:"/"},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.showTabBar&&this.props.enableTabBar,n=this.state.path;return t?o.a.createElement("div",{className:"appTabBar"},o.a.createElement(g.a,{unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"white",hidden:!this.props.showTabBar,tabBarPosition:"bottom"},o.a.createElement(g.a.Item,{title:"Dashboard",selected:"/"===n,icon:o.a.createElement("i",{className:"iconfont buttonIcon"},"\ue64e"),selectedIcon:o.a.createElement("i",{className:"iconfont buttonIcon buttonIconChecked"},"\ue64e"),onPress:function(){return e.pushPath("/")}}),o.a.createElement(g.a.Item,{title:"Logs",selected:"/logs"===n,icon:o.a.createElement("i",{className:"iconfont buttonIcon"},"\ue60c"),selectedIcon:o.a.createElement("i",{className:"iconfont buttonIcon buttonIconChecked"},"\ue60c"),onPress:function(){return e.pushPath("/logs")}}),o.a.createElement(g.a.Item,{title:"Address",selected:"/address"===n,icon:o.a.createElement("i",{className:"iconfont buttonIcon"},"\ue61b"),selectedIcon:o.a.createElement("i",{className:"iconfont buttonIcon buttonIconChecked"},"\ue61b"),onPress:function(){return e.pushPath("/address")}}),o.a.createElement(g.a.Item,{title:"Setting",selected:"/setting"===n,icon:o.a.createElement("i",{className:"iconfont buttonIcon"},"\ue660"),selectedIcon:o.a.createElement("i",{className:"iconfont buttonIcon buttonIconChecked"},"\ue660"),onPress:function(){return e.pushPath("/setting")}}))):null}},{key:"pushPath",value:function(e){this.setState({path:e}),this.props.history.push({pathname:e})}}]),n}(o.a.Component),j=Object(O.f)(Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{showTabBar:e.showTabBar,enableTabBar:e.enableTabBar})}))(C)),w=(n(34),n(13)),N=n.n(w),I=(n(60),n(36)),T=n.n(I),P=(n(49),n(19)),x=n.n(P),D=(n(124),n(77)),B=n.n(D),M=(n(41),n(20)),L=n.n(M),A=(n(27),n(7)),H=n.n(A),R=(n(231),n(144)),_=n.n(R),V=(n(108),n(101)),U=n.n(V),Z=n(74),F=n(145),W=n.n(F);var z=function(){N.a.hide()},K=function(e){N.a.fail(e)};function Y(e){var t=!e.hideLoading;return t&&N.a.loading("Loading",0),new Promise((function(n,a){(function(e){return W()(e)})(e).then((function(e){if(t&&z(),200!==e.status)return K("Http Response Status:".concat(e.status)),void a(e);var o=e.data;if(200!==o.code)return K("Error [".concat(o.code,"]:").concat(o.msg)),void a(e);n(o.data)})).catch((function(e){t&&z();var n=e.toString();K(n),a(e)}))}))}var J=function(){return Y({url:"/api/sensor/reload",method:"post"})},X=function(e){return{type:"tabBar.set",data:e}},q=function(e){return{type:"title.set",data:e}},G=function(){return function(e){Y({url:"/api/dashboard/slot-data",method:"get",hideLoading:!0}).then((function(t){var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push(t[a]);var o={type:"dashboard.slot_data.fetch.async",data:n.sort((function(e,t){return e.slotNo.localeCompare(t.slotNo)}))};e(o)}))}},$=function(){return function(e){Y({url:"/api/sensor/_with-slot",method:"get"}).then((function(t){var n=t.sort((function(e,t){return e.address-t.address}));e({type:"sensors.fetch.async",data:n})}))}},Q=function(e,t){return function(n){new Promise((function(e,t){e()})).then((function(){n({type:"sensor.elabel.toggle",data:{sensorId:e,hasElabel:t}})}))}},ee=function(){return function(e){Y({url:"/api/connection/",method:"get"}).then((function(t){e({type:"connections.fetch.async",data:t})}))}},te=function(e){return function(t){(function(e){return Y({url:"/api/connection/".concat(e),method:"delete"})})(e).then((function(){t({type:"connection.delete",data:{id:e}})}))}},ne=function(){return function(e){Y({url:"/api/config/application.ui.enable_tabBar",method:"get"}).then((function(t){var n={type:"system.tabBar.set",data:"true"===t.value};e(n)}))}},ae=function(e){return function(t){(function(e){return Y({url:"/api/config/application.ui.enable_tabBar",method:"post",data:{value:e}})})(e).then((function(){t({type:"system.tabBar.set",data:e})}))}},oe=function(e){return{type:"system.header.set",data:e}},re=(n(251),{1:"Serial",2:"Network"}),se=function(e){return e in re?re[e]:"Unknown [".concat(e,"]")},ce={1:"\u4f7f\u7528\u4e2d",2:"\u79bb\u7ebf",3:"\u5df2\u505c\u7528",4:"\u8d85\u8f7d",5:"\u6b20\u8f7d"},ie=function(e){return e in ce?ce[e]:"Unknown State:"+e},le=function(){return Y({url:"/api/slot/zero-all",method:"post"})},ue=function(e){var t=encodeURIComponent(e);return Y({url:"/api/slot/".concat(t,"/zero"),method:"post"})},he=function(e){return Y({url:"/api/slot/".concat(e),method:"get"})},me=[{title:"\u91cd\u529b\u8d27\u9053\u6570\u636e",key:"dashboard"},{title:"\u91cd\u529b\u8d27\u9053\u914d\u7f6e",key:"settings"}],pe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).rootEle=document,a.state={sensors:[],sensorModalVisible:!1,operationSlot:{},searchSkuNo:"",noticeSlots:[]},a.props.setTitle("Dashboard"),a.renderSlotCard=a.renderSlotCard.bind(Object(Z.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.startFetchData(),this.props.showHeader(!1),this.props.showTabBar(!1),this.listenKeyPress()}},{key:"listenKeyPress",value:function(){var e=this;this.rootEle.onkeypress=function(t){if("body"===t.target.tagName.toLowerCase()){var n=t.keyCode;13===n?e.triggerHighlight(e.state.searchSkuNo):e.appendSearchSku(String.fromCharCode(n))}}}},{key:"appendSearchSku",value:function(e){var t=this.state.searchSkuNo;this.setState({searchSkuNo:t+e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.fetchTimer),this.props.showHeader(!0),this.props.showTabBar(!0),this.cancelKeyPress()}},{key:"cancelKeyPress",value:function(){this.rootEle.onkeypress=null}},{key:"startFetchData",value:function(){var e=this;this.props.fetchSlotData(),this.fetchTimer=setInterval((function(){e.props.fetchSlotData()}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.slots,n=this.state,a=n.searchSkuNo,r=n.noticeSlots,s=n.sensorModalVisible,c=n.operationSlot,i=n.sensors,l=function(e){var t,n={},a=function(e,t){e in n?n[e].push(t):n[e]=[t]},o=Object(m.a)(e);try{for(o.s();!(t=o.n()).done;){var r=t.value,s=r.slotNo.match(/^(\w+)-(\d+)-(\w+)$/);if(s)a("".concat(s[1],"\u8d27\u67b6\u7b2c").concat(s[2],"\u5c42"),r);else a("\u672a\u5206\u7ec4\u8d27\u9053",r)}}catch(l){o.e(l)}finally{o.f()}var c=[];for(var i in n)n.hasOwnProperty(i)&&c.push({name:i,slots:n[i]});return c}(t);this.highlightSlotIds={};var u,h=Object(m.a)(r);try{for(h.s();!(u=h.n()).done;){var p=u.value;this.highlightSlotIds[p.id]=!0}}catch(f){h.e(f)}finally{h.f()}var d=r?r[0]:null;return o.a.createElement("div",{className:"dashboard"},o.a.createElement(U.a,{tabs:me,onChange:function(t,n){return e.onTabChange(t,n)}}),o.a.createElement(_.a,{value:a,onSubmit:function(t){return e.triggerHighlight(t)},onChange:function(t){return e.setState({searchSkuNo:t})}}),o.a.createElement("div",{className:"notice-list"},this.renderNoticeBar(d)),o.a.createElement("div",{className:"slot-groups"},l.map((function(t){return e.renderGroupItem(t)}))),o.a.createElement(L.a,{visible:s,title:"Sensors for ".concat(c.slotNo),transparent:!0,footer:[{text:"OK",onPress:function(){return e.setState({sensorModalVisible:!1})}},{text:"DoZero",onPress:function(){return e.doSlotZero(e.state.operationSlot)}}],onClose:function(){return e.setState({sensorModalVisible:!1})}},o.a.createElement(H.a,{renderHeader:function(){return"Sensors"}},i?i.map((function(e){return o.a.createElement(H.a.Item,{extra:ie(e.state),key:e.id},e.deviceSn,o.a.createElement(H.a.Item.Brief,null,e.address485))})):o.a.createElement(H.a.Item,null,"Empty List"))))}},{key:"renderNoticeBar",value:function(e){if(e){var t=[];return t.push(e.skuName),e.skuShelfLifeOpenDays?(t.push("\uff0c\u5f00\u5c01\u540e\u4fdd\u8d28\u671f"),t.push(o.a.createElement("span",{className:"days"},e.skuShelfLifeOpenDays)),t.push("\u5929")):t.push("\uff0c\u5f00\u5c01\u540e\u4fdd\u8d28\u671f\u672a\u8bbe\u7f6e\uff01"),o.a.createElement(B.a,{className:"notice"},t)}}},{key:"renderGroupItem",value:function(e){var t=this;return o.a.createElement("div",{className:"group-item",key:e.name},o.a.createElement("p",{className:"group-name"},e.name),o.a.createElement(T.a,null,o.a.createElement(x.a,{className:"slots",wrap:"wrap",justify:"between"},e.slots.map((function(e){return t.renderSlotCard(e)})))))}},{key:"renderSlotCard",value:function(e){var t=this;if(!e.sensors)return null;var n=e.sku||{},a=e.data||{},r="slot-card";e.id in this.highlightSlotIds?r+=" slot-card-highlight":function(e){return 1!==e}(e.state)&&(!function(e){return 3===e}(e.state)?!function(e){return 2===e}(e.state)?r+=" slot-card-warn":r+=" slot-card-offline":r+=" slot-card-disable");var s=function(e){return 1!==e}(a.toleranceState),c=ie(e.state),i=(a.weight/1e3).toFixed(3),l=function(e){var t=e.count,n=1===e.weightState;return null===t?"~\u2757":n?t:"~"+t}(a);return o.a.createElement("div",{key:e.id,className:r,onClick:function(){return t.onSlotCardClick(e)}},o.a.createElement(x.a,{className:"card-header",justify:"between"},o.a.createElement("div",{className:"slot-no"},e.slotNo),o.a.createElement("div",{className:"state"},o.a.createElement("span",{className:"weight"},"(",i,"kg)"),o.a.createElement("span",{className:"dot"}),o.a.createElement("span",null,c))),o.a.createElement(x.a,{className:"card-body",justify:"between"},o.a.createElement("div",{className:"left"},o.a.createElement("div",{className:"sku-no"},"SKU:",n.skuNo),o.a.createElement("div",{className:"sku-name"},n.name)),o.a.createElement("div",{className:"delimiter"}),o.a.createElement("div",{className:"right ".concat(s?"right-incredible":"")},o.a.createElement("span",{className:"pcs-value"},l),o.a.createElement("span",{className:"pcs-unit"},"(\u6570\u91cf)"))))}},{key:"onSlotCardClick",value:function(e){this.setState({operationSlot:e,sensors:e.sensors,sensorModalVisible:!0})}},{key:"triggerHighlight",value:function(e){var t,n=this;""!==e&&""!==e.trim()?(t=e,Y({url:"/api/slot/highlight",method:"post",data:{skuNo:t}})).then((function(e){n.setState({noticeSlots:e}),setTimeout((function(){return n.setState({noticeSlots:[],searchSkuNo:""})}),5e3)})).catch((function(){n.setState({searchSkuNo:""})})):N.a.show("Please Type a SkuNo!",1,!1)}},{key:"onTabChange",value:function(e,t){switch(t){case 0:this.props.history.push({pathname:"/dashboard"});break;case 1:this.props.history.push({pathname:"/setting/"})}}},{key:"doSlotZero",value:function(e){var t=this,n=e.slotNo;L.a.alert("Do Zero?","Do zero for this clot[".concat(n,"]?"),[{text:"Cancel"},{text:"Yes",onPress:function(){return t.callDoZero(n)}}])}},{key:"callDoZero",value:function(e){ue(e).then((function(){N.a.show("slot[".concat(e,"] Zero success!"))}))}}]),n}(a.Component),de=Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{slots:e.dashboardSlots})}),(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{fetchSlotData:function(){return e(G.apply(void 0,arguments))},setTitle:function(){return e(q.apply(void 0,arguments))},showHeader:function(){return e(oe.apply(void 0,arguments))},showTabBar:function(){return e(X.apply(void 0,arguments))}})}))(pe),fe=Object(O.f)(de),ve=n(32),be=(n(50),n(29)),ye=n.n(be),Ee=(n(97),n(56)),Se=n.n(Ee),ke=(n(98),n(28)),ge=n.n(ke),Oe=(n(40),n(25)),Ce=n.n(Oe),je=(n(258),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).defaultPosition={right:20,bottom:100},a.state={position:a.defaultPosition,down:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.position,a=t.down;return o.a.createElement("div",{className:"floatButton "+(a?"move":""),style:Object(p.a)({},n),onMouseDown:function(t){return e.onMouseDown(t)},onMouseUp:function(){return e.onMouseUp()},onMouseMove:function(t){return e.onMouseMove(t)}},o.a.createElement(Ce.a,{type:this.props.iconType,className:"icon"}))}},{key:"callOnClick",value:function(){this.props.onClick&&this.props.onClick()}},{key:"setDown",value:function(e){this.setState({down:e})}},{key:"onMouseDown",value:function(e){this.setDown(!0),this._moved=!1,this.startPos={x:e.clientX,y:e.clientY}}},{key:"onMouseUp",value:function(){this.setDown(!1),this.defaultPosition=this.state.position,this._moved||(this.callOnClick(),this._moved=!1)}},{key:"onMouseMove",value:function(e){if(this.state.down){var t=e.clientX,n=e.clientY,a=this.startPos.x-t,o=this.startPos.y-n,r=this.defaultPosition,s=r.right,c=r.bottom;s+=a,c+=o,this.setState({position:{right:s,bottom:c}}),this._moved=!0}}}]),n}(a.Component)),we=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a.props.setTitle("Sensor Setting"),a.props.setTabBarState(!1),a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.sensors;return o.a.createElement("div",{className:"slotSetting"},o.a.createElement(H.a,{renderHeader:function(){return"Sensors"}},t.map((function(t){return o.a.createElement(H.a.Item,{key:t.id},o.a.createElement(ge.a,null,o.a.createElement(ge.a.Header,{title:"Address:".concat(t.address),extra:t.deviceSn}),o.a.createElement(ge.a.Body,null,o.a.createElement(x.a,{justify:"between"},o.a.createElement("span",null,"ELabel"),o.a.createElement(Se.a,{checked:t.hasElabel,onChange:function(n){return e.toggleElabel(t,n)},platform:"android"}))),o.a.createElement(ge.a.Footer,{content:"Slot:[".concat(t.slot&&t.slot.slotNo,"]"),extra:t.slot&&t.slot.id})))}))),o.a.createElement(je,{iconType:"ellipsis",onClick:function(){return e.showOperationActions()}}))}},{key:"componentDidMount",value:function(){this.props.fetchSensors()}},{key:"toggleElabel",value:function(e,t){this.props.toggleSensorElable(e.id,t)}},{key:"showOperationActions",value:function(){var e=this,t=["Reload Sensors","Cancel"];ye.a.showActionSheetWithOptions({title:"Operations",options:t,cancelButtonIndex:t.length-1,destructiveButtonIndex:0},(function(t){0===t&&e.callReloadSensors()}))}},{key:"callReloadSensors",value:function(){L.a.alert("Reload","Are you sure to reload?",[{text:"Yes",onPress:function(){J().then((function(){N.a.show("Reload Success!",1,!1)}))}},{text:"Cancel",onPress:function(){N.a.show("Cancel",1,!1)}}])}}]),n}(a.Component),Ne=Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{sensors:e.sensors})}),(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{fetchSensors:function(){return e($.apply(void 0,arguments))},toggleSensorElable:function(){return e(Q.apply(void 0,arguments))},setTitle:function(){return e(q.apply(void 0,arguments))},setTabBarState:function(){return e(X.apply(void 0,arguments))}})}))(we),Ie=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a.props.setTitle("Setting"),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setTabBarState(!0)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"setting"},o.a.createElement(H.a,{renderHeader:function(){return"Settings:"}},o.a.createElement(H.a.Item,{onClick:function(){return e.go("/setting/sensor")},arrow:"horizontal"},"Sensors"),o.a.createElement(H.a.Item,{onClick:function(){return e.go("/setting/slot")},arrow:"horizontal"},"Slots"),o.a.createElement(H.a.Item,{onClick:function(){return e.go("/setting/connection")},arrow:"horizontal"},"Connections"),o.a.createElement(H.a.Item,{onClick:function(){return e.go("/setting/system")},arrow:"horizontal"},"System Info"),o.a.createElement(H.a.Item,{arrow:"horizontal",onClick:function(){return e.go("/setting/system-check")}},"System Check"),o.a.createElement(H.a.Item,{onClick:function(){return e.go("/setting/overview")},arrow:"horizontal"},"Overview")))}},{key:"go",value:function(e){this.props.history.push({pathname:e})}}]),n}(a.Component),Te=Object(O.f)(Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))},setTabBarState:function(){return e(X.apply(void 0,arguments))}})}))(Ie)),Pe=(n(259),["Refresh","Do Zero All","Cancel"]),xe=H.a.Item,De=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={slots:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setTabBarState(!1),this.props.setTitle("Slot Settings"),this.fetchSlots()}},{key:"render",value:function(){var e=this,t=this.state.slots;return o.a.createElement("div",{className:"slotSetting"},o.a.createElement(H.a,{renderHeader:function(){return"Slot List"}},t.map((function(t){return o.a.createElement(xe,{key:t.id,extra:o.a.createElement(Ce.a,{type:"right"}),onClick:function(){return e.toSlotDetail(t)}},o.a.createElement(x.a,{justify:"between"},o.a.createElement("span",{className:"slotNo"},t.slotNo),o.a.createElement("span",{className:"name"},t.skuName)))}))),o.a.createElement(je,{iconType:"ellipsis",onClick:function(){return e.showOperationSheet()}}))}},{key:"showOperationSheet",value:function(){var e=this;ye.a.showActionSheetWithOptions({options:Pe,title:"Operations",cancelButtonIndex:Pe.length-1,destructiveButtonIndex:1},(function(t){switch(t){case 0:e.fetchSlots();break;case 1:e.doZeroAll()}}))}},{key:"toSlotDetail",value:function(e){this.props.history.push({pathname:"/setting/slot-detail/".concat(e.id)})}},{key:"doZeroAll",value:function(){le().then((function(){N.a.show("All Zeroed!")}))}},{key:"fetchSlots",value:function(){var e=this;Y({url:"/api/slot/",method:"get"}).then((function(t){var n=t.sort((function(e,t){return e.slotNo.localeCompare(t.slotNo)}));e.setState({slots:n})}))}}]),n}(a.Component),Be=Object(O.f)(Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTabBarState:function(){return e(X.apply(void 0,arguments))},setTitle:function(){return e(q.apply(void 0,arguments))}})}))(De)),Me=(n(134),n(62)),Le=n.n(Me),Ae=(n(138),n(39)),He=n.n(Ae),Re=(n(51),n(23)),_e=n.n(Re),Ve=(n(280),["Delete","Start Scan","Cancel"]),Ue=[{label:"Serial",value:1},{label:"Network",value:2}],Ze=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={createDialogVisible:!1,create:{type:null,target:""},serialPorts:[]},a.props.setTitle("Connection Setting"),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchConnection(),this.props.setTabBarState(!1)}},{key:"render",value:function(){var e=this,t=H.a.Item,n=this.props.connections,a=this.state.createDialogVisible,r=this.state.create;return o.a.createElement("div",null,o.a.createElement(H.a,{renderHeader:function(){return"Connections"}},n.map((function(n){return o.a.createElement(t,{key:n.id,extra:o.a.createElement(Ce.a,{type:"right"}),onClick:function(){return e.showConnectionOperations(n)}},o.a.createElement(x.a,{justify:"between",className:"connectionItem"},o.a.createElement("span",{className:"type"},se(n.type)),o.a.createElement("span",{className:"target"},n.target)))})),o.a.createElement(t,{key:"createButton"},o.a.createElement(_e.a,{type:"primary",onClick:function(){return e.showCreateDialog()}},"New"))),o.a.createElement(L.a,{visible:a,transparent:!0,title:"Create A Connection",footer:[{text:"Cancel",onPress:function(){return e.setState({createDialogVisible:!1})}},{text:"Create",onPress:function(){return e.createConnection()}}],onClose:function(){return e.setState({createDialogVisible:!1})}},o.a.createElement(H.a,{title:"Connection"},o.a.createElement(Le.a,{data:Ue,title:"Connection Type",cols:1,extra:"Choose",onChange:function(t){return e.setCreateType(t)}},o.a.createElement(H.a.Item,null,o.a.createElement(He.a,{value:r.type&&se(r.type),disabled:!0,placeholder:"Type"}))),function(){var t=o.a.createElement(H.a.Item,{key:"target"},o.a.createElement(He.a,{placeholder:"Connection Target",onChange:function(t){return e.setCreateTarget(t)},value:r.target,disabled:1===e.state.create.type}));return 1===r.type?o.a.createElement(Le.a,{data:e.state.serialPorts,extra:"Choose",title:"Serial Port List",cols:1,onChange:function(t){return e.setCreateTargetSerial(t)}},t):t}())))}},{key:"deleteConnection",value:function(e){var t=this;L.a.alert("Delete Connection!","Are You Sure delete this connection",[{text:"Cancel",onPress:function(){N.a.show("Canceled",1,!1)}},{text:"Delete",onPress:function(){t.props.deleteConnection(e.id)}}])}},{key:"scanConnection",value:function(e){L.a.alert("Scan Device!","Scan Devices for this Connection?",[{text:"Cancel",onPress:function(){N.a.show("Canceled",1,!1)}},{text:"Scan",onPress:function(){var t;(t=e.id,Y({url:"/api/connection/".concat(t,"/_scan"),method:"post"})).then((function(){N.a.show("Scan Success!",2,!1)}))}}])}},{key:"showCreateDialog",value:function(){this.setState({createDialogVisible:!0})}},{key:"createConnection",value:function(){var e,t=this;(e=this.state.create,Y({url:"/api/connection/",method:"put",data:e})).then((function(){t.props.fetchConnection(),t.setState({create:{},createDialogVisible:!1})}))}},{key:"setCreateType",value:function(e){var t=this;e.length<1&&N.a.show("Please Choose A Connection Type!");var n=e[0],a={type:n,target:""};this.setState({create:a}),1===n&&this.state.serialPorts.length<=0&&Y({url:"/api/serial/scan",method:"get"}).then((function(e){var n,a=[],o=Object(m.a)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({label:r,value:r})}}catch(s){o.e(s)}finally{o.f()}t.setState({serialPorts:a})}))}},{key:"setCreateTarget",value:function(e){var t=Object(p.a)(Object(p.a)({},this.state.create),{},{target:e});this.setState({create:t})}},{key:"setCreateTargetSerial",value:function(e){if(e){var t=e[0],n=Object(p.a)(Object(p.a)({},this.state.create),{},{target:t});this.setState({create:n})}else N.a.show("Please Choose A Serial Port!")}},{key:"showConnectionOperations",value:function(e){var t=this;ye.a.showActionSheetWithOptions({title:"".concat(e.target," Operations"),options:Ve,cancelButtonIndex:Ve.length-1,destructiveButtonIndex:0},(function(n){switch(n){case 0:t.deleteConnection(e);break;case 1:t.scanConnection(e)}}))}}]),n}(a.Component),Fe=Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{connections:e.connections})}),(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{fetchConnection:function(){return e(ee.apply(void 0,arguments))},setTitle:function(){return e(q.apply(void 0,arguments))},deleteConnection:function(){return e(te.apply(void 0,arguments))},setTabBarState:function(){return e(X.apply(void 0,arguments))}})}))(Ze),We=["Do Zero","Delete","Cancel"],ze=H.a.Item,Ke=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={slot:{}},a.slotId=a.props.match.params.id,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setTitle("".concat(this.slotId," Settings")),this.fetchSlotInfo()}},{key:"fetchSlotInfo",value:function(){var e=this;he(this.slotId).then((function(t){e.setState({slot:t}),e.props.setTitle("".concat(t.slotNo," Settings"))}))}},{key:"render",value:function(){var e=this,t=this.state.slot;return o.a.createElement("div",{className:"slotDetail"},o.a.createElement(H.a,{renderHeader:function(){return"Slot Info"}},o.a.createElement(ze,{key:"slotNo"},o.a.createElement(He.a,{placeholder:"Slot No",value:t.slotNo,onChange:function(t){return e.setUpdateSlotProp({slotNo:t})}},"SlotNo")),o.a.createElement(ze,{key:"SkuName"},o.a.createElement(He.a,{placeholder:"Sku Name",value:t.skuName,onChange:function(t){return e.setUpdateSlotProp({skuName:t})}},"SKUName")),o.a.createElement(ze,{key:"skuNo"},o.a.createElement(He.a,{placeholder:"SKU No",value:t.skuNo,onChange:function(t){return e.setUpdateSlotProp({skuNo:t})}},"SKUNo")),o.a.createElement(ze,{key:"skuApw"},o.a.createElement(He.a,{placeholder:"SKU Apw",value:t.skuApw,type:"number",onChange:function(t){return e.setUpdateSlotProp({skuApw:t})}},"Apw")),o.a.createElement(ze,{key:"skuTolerance"},o.a.createElement(He.a,{placeholder:"SKU Tolerance",value:t.skuTolerance,type:"number",onChange:function(t){return e.setUpdateSlotProp({skuTolerance:t})}},"Tolerance")),o.a.createElement(ze,{key:"skuShelfLifeOpenDays"},o.a.createElement(He.a,{placeholder:"SKU ShelfLifeOpenDays",value:t.skuShelfLifeOpenDays,type:"number",onChange:function(t){return e.setUpdateSlotProp({skuShelfLifeOpenDays:t})}},"SLO Days")),o.a.createElement(ze,{key:"applyBtn"},o.a.createElement(T.a,null,o.a.createElement(_e.a,{type:"primary",onClick:function(){return e.applyModify()}},"Apply Modify")))),o.a.createElement(H.a,{renderHeader:function(){return"Operations"}},o.a.createElement(H.a.Item,{key:"hasELabel",extra:o.a.createElement(Se.a,{checked:t.hasElabel,onChange:function(t){return e.toggleELabel(t)},platform:"android"})},"Enable ELabel"),o.a.createElement(H.a.Item,{arrow:"horizontal",onClick:function(){return e.props.history.push({pathname:"/setting/slot-sensors/".concat(t.id)})}},"Sensors")),o.a.createElement(je,{iconType:"ellipsis",onClick:function(){return e.openOperation()}}))}},{key:"openOperation",value:function(){var e=this;ye.a.showActionSheetWithOptions({title:"Operations",options:We,destructiveButtonIndex:1,cancelButtonIndex:We.length-1},(function(t){var n=We[t];"Do Zero"===n?e.doZero():"Delete"===n&&N.a.show("Unable To Delete!")}))}},{key:"doZero",value:function(){var e=this.state.slot;ue(e.slotNo).then((function(){N.a.show("Do Zero Success!")}))}},{key:"setUpdateSlotProp",value:function(e){var t=Object(p.a)(Object(p.a)({},this.state.slot),e);this.setState({slot:t})}},{key:"applyModify",value:function(){var e;(e=this.state.slot,Y({url:"/api/slot/".concat(e.id),method:"post",data:e})).then((function(){N.a.show("Apply Success!")}))}},{key:"toggleELabel",value:function(e){var t,n=this;(t={id:this.slotId,hasELabel:e},Y({url:"/api/slot/".concat(t.id,"/has-e-label"),method:"post",data:{hasElabel:t.hasELabel}})).then((function(){N.a.show("Toggle ELabel Success!"),n.fetchSlotInfo()}))}}]),n}(a.Component),Ye=Object(O.f)(Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(Ke)),Je=(n(71),n(38)),Xe=n.n(Je),qe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={systemInfo:{},killButtonState:!0,libLoadVisible:!1,reloadLibPath:""},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setTitle("System Infos"),Y({url:"/api/dashboard/system-infos",method:"get"}).then((function(t){e.setState({systemInfo:t})}))}},{key:"render",value:function(){var e=this,t=H.a.Item,n=this.state,a=n.systemInfo,r=n.libLoadVisible,s=n.reloadLibPath,c=this.props.enableTabBar;return o.a.createElement("div",{className:"systemSettings"},o.a.createElement(H.a,{renderHeader:function(){return"System Infos"}},o.a.createElement(t,{key:"appName",extra:a.appName},"APPName"),o.a.createElement(t,{key:"appVersion",extra:a.appVersion},"APPVersion"),o.a.createElement(t,{key:"dbVersion",extra:a.dbVersion},"DBVersion"),o.a.createElement(t,{key:"dbVersionName",extra:a.dbVersionName},"DBVersionName"),o.a.createElement(t,{key:"pid",extra:a.pid},"ProcessID"),o.a.createElement(t,{key:"libPath",extra:o.a.createElement(Ce.a,{type:"right"}),onClick:function(){return e.showLibLoadModal()}}," LibPath: ",a.libPath),o.a.createElement(t,{key:"kill"},o.a.createElement(_e.a,{type:"warning",onClick:function(){return e.killProcess()},disabled:!this.state.killButtonState},"Kill Process"))),o.a.createElement(H.a,{renderHeader:function(){return"Settings"}},o.a.createElement(t,{key:"tabBar",extra:o.a.createElement(Se.a,{checked:c,onChange:function(t){return e.setEnableTabBar(t)},platform:"android"})},"EnableTabBar"),o.a.createElement(t,{key:"systemProps",extra:o.a.createElement(Ce.a,{type:"right"}),onClick:function(){return e.props.history.push({pathname:"/setting/system-props"})}},"System Props"),o.a.createElement(t,{key:"stopService"},o.a.createElement(_e.a,{type:"warning",onClick:function(){return e.stopWeightService()}},"Stop Weight Service"))),o.a.createElement(L.a,{visible:r,title:"Reload SerialPort Library",transparent:!0,maskClosable:!0,footer:[{text:"Cancel",onPress:function(){return e.setState({libLoadVisible:!1})}},{text:"Reload",onPress:function(){return e.reloadLibrary()}}]},o.a.createElement(Xe.a,{placeholder:"Type the SerialPort library Path!",autoHeight:!0,value:s,onChange:function(t){return e.setState({reloadLibPath:t})}})))}},{key:"killProcess",value:function(){N.a.show("Do not kill this process!",1,!1),this.setState({killButtonState:!1})}},{key:"setEnableTabBar",value:function(e){this.props.setEnableTabBar(e)}},{key:"showLibLoadModal",value:function(){var e=this.state.systemInfo.libPath;this.setState({reloadLibPath:e,libLoadVisible:!0})}},{key:"reloadLibrary",value:function(){var e,t=this;(e=this.state.reloadLibPath,Y({url:"/api/serial/load-lib",method:"post",data:{libPath:e}})).then((function(e){N.a.show("Success: [".concat(e,"]")),t.setState({libLoadVisible:!1})}))}},{key:"stopWeightService",value:function(){Y({url:"/api/sensor/_stop-weight-service",method:"post"}).then((function(){N.a.show("Stop Weight Service Success!")}))}}]),n}(a.Component),Ge=Object(O.f)(Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{enableTabBar:e.enableTabBar})}),(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))},setEnableTabBar:function(){return e(ae.apply(void 0,arguments))}})}))(qe)),$e=H.a.Item,Qe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={systemProps:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;Y({url:"/api/dashboard/system-props",method:"get"}).then((function(t){var n=[];for(var a in t)t.hasOwnProperty(a)&&n.push({name:a,value:t[a]});e.setState({systemProps:n})}))}},{key:"render",value:function(){var e=this.state.systemProps;return o.a.createElement("div",{className:"systemProps"},o.a.createElement(H.a,{renderHeader:function(){return"System Properties"}},e.map((function(e){return o.a.createElement($e,{key:e.name},o.a.createElement("div",null,e.name),o.a.createElement(Xe.a,{value:e.value,autoHeight:!0,labelNumber:5}))}))))}}]),n}(a.Component),et=(n(282),["Remove","Cancel"]),tt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={slot:{},sensors:[],sensorRemoveMode:!1,allSlots:[],sensorPickerData:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setTitle("Sensors");var t=this.props.match.params.id;he(t).then((function(t){var n,a=t.sensors,o=Object(m.a)(a);try{for(o.s();!(n=o.n()).done;){n.value.changed=!1}}catch(r){o.e(r)}finally{o.f()}e.setState({slot:t,sensors:a}),e.props.setTitle("Sensors For ".concat(t.slotNo))})),Y({url:"/api/slot/_with-sensors",method:"get"}).then((function(t){var n,a=[],o=Object(m.a)(t);try{for(o.s();!(n=o.n()).done;){var r,s=n.value,c=s.sensors,i=[],l=Object(m.a)(c);try{for(l.s();!(r=l.n()).done;){var u=r.value;i.push({value:u.id,label:u.address})}}catch(h){l.e(h)}finally{l.f()}a.push({value:s.id,label:s.slotNo,children:i})}}catch(h){o.e(h)}finally{o.f()}e.setState({allSlots:t,sensorPickerData:a})}))}},{key:"renderSensorItem",value:function(e){var t=this,n=this.state,a=n.sensorRemoveMode,r=n.sensorPickerData,s=o.a.createElement(H.a.Item,{key:e.id,arrow:"horizontal",className:"sensor-item ".concat(e.changed?"sensor-item-changed":""),onClick:function(){return t.openSensorOperations(e)},extra:a?"Click to remove":""},e.deviceSn);return a?s:o.a.createElement(Le.a,{data:r,key:e.id,value:[e.slotId,e.id],cols:2,onChange:function(n){return t.onSelectSensor(e,n)}},s)}},{key:"onSelectSensor",value:function(e,t){var n,a=t[0],o=t[1],r=-1,s=this.state.sensors;for(var c in s){if(s.hasOwnProperty(c))s[c].id===e.id&&(r=c)}var i,l=Object(m.a)(this.state.allSlots);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(u.id===a){var h,p=Object(m.a)(u.sensors);try{for(p.s();!(h=p.n()).done;){var d=h.value;d.id===o&&(d.changed=!0,n=d)}}catch(b){p.e(b)}finally{p.f()}break}}}catch(b){l.e(b)}finally{l.f()}var f,v=Object(m.a)(s);try{for(v.s();!(f=v.n()).done;){if(f.value.id===n.id)return void N.a.show("Duplicate Sensor!",1,!1)}}catch(b){v.e(b)}finally{v.f()}s[r]=n,this.setState({sensors:s})}},{key:"render",value:function(){var e=this,t=this.state,n=t.slot,a=t.sensors,r=t.sensorRemoveMode;return o.a.createElement("div",null,o.a.createElement(H.a,{renderHeader:function(){return"Slot Info"}},o.a.createElement(H.a.Item,{extra:n.slotNo},"Slot NO"),o.a.createElement(H.a.Item,{extra:n.skuName},"SKU Name"),o.a.createElement(H.a.Item,{extra:n.skuNo},"SKU NO")),o.a.createElement(H.a,{renderHeader:function(){return"Sensors"}},a.map((function(t){return e.renderSensorItem(t)})),o.a.createElement(H.a.Item,null,o.a.createElement(T.a,null,o.a.createElement(x.a,{justify:"between"},o.a.createElement(x.a.Item,null,o.a.createElement(_e.a,{type:"warning",onClick:function(){return e.setState({sensorRemoveMode:!e.state.sensorRemoveMode})}},r?"Cancel":"Remove")),o.a.createElement(x.a.Item,null,o.a.createElement(_e.a,{type:"ghost",onClick:function(){return e.addSensor()},disabled:r},"Add")),o.a.createElement(x.a.Item,null,o.a.createElement(_e.a,{type:"primary",disabled:r,onClick:function(){return e.applySensors()}},"Apply")))))))}},{key:"addSensor",value:function(){var e,t=Object(m.a)(this.state.sensors);try{for(t.s();!(e=t.n()).done;){if(e.value.id<0)return void N.a.show("Please select a sensor!",1,!1)}}catch(a){t.e(a)}finally{t.f()}var n=this.state.sensors;n.push({id:-1,deviceSn:"Not Selected",changed:!0}),this.setState({sensors:n})}},{key:"openSensorOperations",value:function(e){var t=this;this.state.sensorRemoveMode&&ye.a.showActionSheetWithOptions({options:et,title:"Sensor ".concat(e.deviceSn),cancelButtonIndex:2,destructiveButtonIndex:0},(function(n){0===n&&L.a.alert("Remove","Remove sensor ".concat(e.deviceSn,"?"),[{text:"Cancel"},{text:"Remove",onPress:function(){return t.removeSensor(e)}}])}))}},{key:"removeSensor",value:function(e){var t=this.state.sensors,n=[];for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];o.id!==e.id&&n.push(o)}this.setState({sensors:n})}},{key:"applySensors",value:function(){var e,t=this,n=this.state.sensors.map((function(e){return e.id})),a=Object(m.a)(n);try{for(a.s();!(e=a.n()).done;){if(e.value<=0)return void N.a.show("Any sensor not selected!",1,!1)}}catch(r){a.e(r)}finally{a.f()}var o=this.state.slot;L.a.alert("Apply Sensor Setting","Do you want to apply this changes?",[{text:"Cancel"},{text:"Apply",onPress:function(){(function(e,t){return Y({url:"/api/sensor/_set-slot-id-by-ids",method:"post",data:{sensorIds:e,slotId:t}})})(n,o.id).then((function(e){N.a.show("Apply Success!");var n,a=t.state.sensors,o=Object(m.a)(a);try{for(o.s();!(n=o.n()).done;){n.value.changed=!1}}catch(r){o.e(r)}finally{o.f()}t.setState({sensors:a})}))}}])}}]),n}(a.Component),nt=Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(tt),at=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={sensors:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=this;Y({url:"/api/sensor/_dump-all",method:"get"}).then((function(t){var n=t.sort((function(e,t){return e.address-t.address}));e.setState({sensors:n})}))}},{key:"render",value:function(){var e=this,t=this.state.sensors;return o.a.createElement("div",{className:"overview"},o.a.createElement(H.a,{renderHeader:function(){return"All Sensors"}},t.map((function(t){return o.a.createElement(H.a.Item,{key:t.id},e.renderSensorItem(t))}))),o.a.createElement(T.a,null,o.a.createElement(_e.a,{onClick:function(){return e.refresh()},type:"primary"},"Refresh")))}},{key:"renderSensorItem",value:function(e){var t=this,n=e.slot,a=e.connection;return o.a.createElement("div",{onClick:function(){return t.onSensorClick(e)}},"WS:[",e.id,",",e.address,"] S:[",n&&n.id,",",n&&n.slotNo,"] C:[",a&&a.id,",",a&&a.target,"]")}},{key:"onSensorClick",value:function(e){var t=e.connection,n=e.slot;e.slot=null,e.connection=null;var a=o.a.createElement(H.a,{renderHeader:function(){return"Sensor"}},o.a.createElement(Xe.a,{value:JSON.stringify(e),autoHeight:!0}),o.a.createElement(Xe.a,{value:JSON.stringify(t),autoHeight:!0}),o.a.createElement(Xe.a,{value:JSON.stringify(n),autoHeight:!0}));L.a.alert("Sensor",a)}}]),n}(a.Component),ot=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={statusTable:{tcpApi:{}},databaseTables:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setTitle("System Check"),this.refreshStatusTable()}},{key:"refreshStatusTable",value:function(){var e=this;Y({url:"/api/status/",method:"get"}).then((function(t){e.setState({statusTable:t})}))}},{key:"refreshDatabaseTables",value:function(){var e=this;Y({url:"/api/status/tables",method:"get"}).then((function(t){e.setState({databaseTables:t})}))}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.statusTable,r=n.databaseTables,s=a.tcpApi;return o.a.createElement("div",{className:"system-check"},o.a.createElement(H.a,{renderHeader:function(){return"TCP API"}},o.a.createElement(H.a.Item,{extra:(e=s.connection,e?o.a.createElement("span",{style:{color:"#1F90E6"}},"Connected"):o.a.createElement("span",{style:{color:"#E94F4F"}},"Disconnected"))},"TCP API Status"),o.a.createElement(H.a.Item,{extra:s.ip},"IP"),o.a.createElement(H.a.Item,{extra:s.port},"PORT"),o.a.createElement(H.a.Item,{arrow:"horizontal",onClick:function(){return t.props.history.push({pathname:"/setting/message-log"})}},"Message Log"),o.a.createElement(H.a.Item,{arrow:"horizontal",onClick:function(){return t.props.history.push({pathname:"/setting/sensor-healthy"})}},"Sensor Healthy"),o.a.createElement(H.a.Item,null,o.a.createElement(x.a,{justify:"between"},o.a.createElement(x.a.Item,null,o.a.createElement(_e.a,{type:"warning",onClick:function(){return t.reconnectTcp()}},"Reconnect")),o.a.createElement(x.a.Item,null,o.a.createElement(_e.a,{type:"primary",onClick:function(){return t.refreshStatusTable()}},"Refresh"))))),o.a.createElement(H.a,{renderHeader:function(){return"Database Tables"}},r.map((function(e){return o.a.createElement(H.a.Item,{key:e},e)})),o.a.createElement(H.a.Item,null,o.a.createElement(_e.a,{type:"primary",onClick:function(){return t.refreshDatabaseTables()}},"Fetch Table List"))))}},{key:"reconnectTcp",value:function(){L.a.alert("Confirm","Disconnect TCP connection and reconnect?",[{text:"Cancel"},{text:"Yes",onPress:function(){Y({url:"/api/status/tcp-disconnect",method:"post"}).then((function(){N.a.show("Disconnect success! reconnect after 3 seconds!",3,!1)}))}}])}}]),n}(a.Component),rt=Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(ot),st=Object(O.f)(rt),ct=(n(283),function(e,t){return o.a.createElement(H.a.Item,{key:t},o.a.createElement(ge.a,{className:"message-item"},o.a.createElement(ge.a.Header,{title:e.action,extra:e.type}),o.a.createElement(ge.a.Body,null,o.a.createElement(Xe.a,{value:JSON.stringify(e.data),rows:3})),o.a.createElement(ge.a.Footer,{content:e.seqNo})))}),it=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={logs:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.refreshLogs(),this.refreshTimmer=setInterval((function(){e.refreshLogs()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshTimmer)}},{key:"refreshLogs",value:function(){var e=this;Y({url:"/api/status/message-log",method:"get"}).then((function(t){e.setState({logs:t})}))}},{key:"render",value:function(){var e=this.state.logs;return o.a.createElement("div",{className:"message-log"},o.a.createElement(H.a,{renderHeader:function(){return"Message Logs"}},e.map(ct)))}}]),n}(a.Component),lt=(n(284),["Clean","Refresh","Cancel"]),ut=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={sensors:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.refreshSensors()}},{key:"refreshSensors",value:function(){var e=this;Y({url:"/api/sensor-healthy/_healthy",method:"get"}).then((function(t){e.setState({sensors:t})}))}},{key:"render",value:function(){var e=this,t=this.state.sensors;return o.a.createElement("div",null,o.a.createElement(H.a,{renderHeader:function(){return"Sensor Healthy"}},t.map((function(t){return o.a.createElement(H.a.Item,null,e.renderSensorCard(t))}))),o.a.createElement(je,{iconType:"ellipsis",onClick:function(){return e.showOperations()}}))}},{key:"renderSensorCard",value:function(e){var t=e.sensor,n=e.packageCounter,a="ZeroOffset:".concat(t.zeroReference),r=n.totalSuccess+n.totalErrors,s=0===r?0:(n.totalSuccess/r*100).toFixed(0),c=0===r?0:(n.totalErrors/r*100).toFixed(0);return o.a.createElement(ge.a,null,o.a.createElement(ge.a.Header,{title:t.address,extra:t.deviceSn}),o.a.createElement(ge.a.Body,{className:"healthy-package-counter"},o.a.createElement(x.a,null,o.a.createElement(x.a.Item,null,o.a.createElement("div",{className:"total"},o.a.createElement("p",{className:"title"},"SUCCESS"),o.a.createElement("p",{className:"value"},n.totalSuccess,"/",s,"%"))),o.a.createElement(x.a.Item,null,o.a.createElement("div",{className:"error"},o.a.createElement("p",{className:"title"},"ERROR"),o.a.createElement("p",{className:"value"},n.totalErrors,"/",c,"%"))),o.a.createElement(x.a.Item,null,o.a.createElement("div",{className:"continue"},o.a.createElement("p",{className:"title"},"CONTINUE"),o.a.createElement("p",{className:"value"},n.continueErrors))))),o.a.createElement(ge.a.Footer,{content:a}))}},{key:"showOperations",value:function(){var e=this;ye.a.showActionSheetWithOptions({options:lt,title:"Operations",cancelButtonIndex:lt.length-1,destructiveButtonIndex:0},(function(t){switch(t){case 0:e.showCleanCounterConfirm();break;case 1:e.refreshSensors()}}))}},{key:"showCleanCounterConfirm",value:function(){var e=this;L.a.alert("Clean Counter?","Clean counter?",[{text:"Cancel"},{text:"Yes",onPress:function(){return e.doCleanCounter()}}])}},{key:"doCleanCounter",value:function(){Y({url:"/api/sensor-healthy/_clean-counter",method:"post"}).then((function(){N.a.show("Clean success!",1,!1)}))}}]),n}(a.Component),ht=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement(ve.a,null,o.a.createElement(O.c,null,o.a.createElement(O.a,{path:"/setting/",component:Te,exact:!0}),o.a.createElement(O.a,{path:"/setting/sensor",component:Ne,exact:!0}),o.a.createElement(O.a,{path:"/setting/slot",component:Be,exact:!0}),o.a.createElement(O.a,{path:"/setting/connection",component:Fe,exact:!0}),o.a.createElement(O.a,{path:"/setting/slot-detail/:id",component:Ye,exact:!0}),o.a.createElement(O.a,{path:"/setting/system",component:Ge,exact:!0}),o.a.createElement(O.a,{path:"/setting/system-props",component:Qe,exact:!0}),o.a.createElement(O.a,{path:"/setting/slot-sensors/:id",component:nt,exact:!0}),o.a.createElement(O.a,{path:"/setting/overview",component:at,exact:!0}),o.a.createElement(O.a,{path:"/setting/system-check",component:st,exact:!0}),o.a.createElement(O.a,{path:"/setting/message-log",component:it,exact:!0}),o.a.createElement(O.a,{path:"/setting/sensor-healthy",component:ut,exact:!0})))}}]),n}(a.Component),mt=Object(S.b)(null,(function(e,t){return Object(p.a)({},t)}))(ht),pt=(n(285),n(146)),dt=n.n(pt),ft=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a.props.setTitle("Config Address"),a}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(dt.a,{img:o.a.createElement(Ce.a,{type:"check-circle",size:"lg",style:{fill:"#1F90E6"}}),title:"\u5f00\u53d1\u4e2d",message:"\u5f00\u53d1\u4e2d"}))}},{key:"componentDidMount",value:function(){N.a.info("\u5f00\u53d1\u4e2d",1,null,!1)}}]),n}(a.Component),vt=Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(ft),bt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a.props.setTitle("Logs"),a}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement(it,null)}}]),n}(a.Component),yt=Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(bt),Et=(n(287),n(147)),St=n.n(Et),kt=(n(290),n(148)),gt=n.n(kt),Ot=(n(292),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={drawerOpen:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.setTitle("About")}},{key:"render",value:function(){return o.a.createElement("div",{className:"about"},o.a.createElement(B.a,{marqueeProps:{loop:!0}},"\u78d0\u77f3\u7535\u6c14\uff08\u5e38\u5dde\uff09\u6709\u9650\u516c\u53f8\uff1ahttp://www.monolith-iot.com"),o.a.createElement(gt.a,null),o.a.createElement(T.a,null,o.a.createElement(St.a,{autoplay:!0,infinite:!0,className:"headerCarousel"},o.a.createElement("div",{className:"carouselItem",style:{backgroundColor:"#FF9808"}},o.a.createElement("div",{className:"title"},"\u78d0\u77f3\u7535\u6c14\uff08\u5e38\u5dde\uff09\u6709\u9650\u516c\u53f8")),o.a.createElement("div",{className:"carouselItem",style:{backgroundColor:"#3171FA"}},o.a.createElement("div",{className:"title"},"MonolithIoT")))),o.a.createElement(T.a,{className:"article"},o.a.createElement("h1",{className:"title"},"\u5173\u4e8e\u6211\u4eec"),o.a.createElement("div",{className:"text"},o.a.createElement("p",null,"\u78d0\u77f3\u7535\u6c14(\u5e38\u5dde)\u6709\u9650\u516c\u53f8,\u662f\u4e00\u5bb6\u9ad8\u79d1\u6280\u667a\u80fd\u6d4b\u91cf\u88c5\u5907\u7814\u53d1\u53ca\u751f\u4ea7\u4f01\u4e1a\uff0c\u628a\u4f20\u7edf\u4f53\u79ef\uff0c\u91cd\u91cf\u7684\u6d4b\u91cf\u6570\u5b57\u5316\u7269\u8054\u7f51\u5316\uff0c\u53ef\u4ee5\u4e0eWMS,ERP\uff0cSAP\u7b49\u4f01\u4e1a\u7ba1\u7406\u8f6f\u4ef6\u76f8\u7ed3\u5408\uff0c\u4fbf\u4e8e\u4f01\u4e1a\u66f4\u76f4\u89c2\u7684\u7ba1\u7406\u81ea\u5df1\u7684\u4ed3\u50a8\uff0c\u7269\u6d41\u7b49\u3002\u78d0\u77f3\u7535\u6c14\u4e0b\u8bbe\u7814\u53d1\u90e8\uff0c\u5de5\u7a0b\u90e8\uff0c\u4e1a\u52a1\u90e8\uff0c\u6709\u8f83\u5f3a\u7684\u8bbe\u8ba1\uff0c\u7814\u53d1\u548c\u751f\u4ea7\u80fd\u529b\uff0c\u53ef\u4e3a\u5ba2\u6237\u63d0\u4f9b\u5d4c\u5165\u5f0f\u8ba1\u7b97\u673a\u7cfb\u7edf\u4ea7\u54c1\u8bbe\u8ba1\uff0c\u5f00\u53d1\uff0c\u7cfb\u7edf\u96c6\u6210\uff0c\u5de5\u7a0b\u5b9e\u65bd\u7b49\u670d\u52a1\u3002"),o.a.createElement("p",null,"\u968f\u7740\u516c\u53f8\u7684\u53d1\u5c55\uff0c\u4e3b\u8981\u4ea7\u54c1\u6709\u81ea\u4e3b\u7814\u53d1\u7684\u667a\u80fd\u6570\u5b57\u5377\u5c3a\uff0c\u667a\u80fd\u624b\u52a8\u53c9\u8f66\u79e4\uff0c\u5b89\u5353\u667a\u80fd\u79f0\u91cd\u7ec8\u7aef\uff0c\u9759\u6001/\u52a8\u6001DWS\u7b49\u5404\u79cd\u7269\u8054\u7f51\u7c7b\u667a\u80fd\u79f0\u91cd\u91cf\u65b9\u8bbe\u5907\u53ca\u8f6f\u4ef6\u5b9a\u5236\u7cfb\u7edf,\u53ef\u4e3a\u5ba2\u6237\u6700\u5927\u7a0b\u5ea6\u5730\u63d0\u4f9b\u667a\u80fd\u5316\u7cfb\u7edf\u5316\u7684\u6d4b\u91cf\u7cfb\u7edf\u89e3\u51b3\u65b9\u6848\u3002\u4ea7\u54c1\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5feb\u9012\u7269\u6d41\u3001\u751f\u9c9c\u4f9b\u5e94\u3001\u6e2f\u53e3\u8ba2\u8231\u3001\u4ed3\u50a8\u3001\u5de5\u4e1a\u79bb\u6563\u5236\u9020\u53ca\u5404\u79cd\u4ee5\u957f\u5ea6(\u542b\u9762 \u79ef\u3001\u4f53\u79ef)\u6d4b\u91cf\u4e3a\u624b\u6bb5\u7684\u6c11\u7528\u3001\u5546\u7528\u7528\u9014\u4e2d\u3002\u51ed\u7740\u53ef\u9760\u7684\u4ea7\u54c1\u8d28\u91cf\u548c\u826f\u597d\u7684\u552e\u540e\u670d\u52a1\uff0c\u6211\u516c\u53f8\u5df2\u4e0e\u987a\u4e30\u3001\u4e2d\u56fd\u90ae\u653f\u3001\u4eac\u4e1c\u3001\u56fd\u9645\u5feb\u9012DHL\u3001\u534e\u4e3a\u7b49\u591a\u5bb6\u77e5\u540d\u4f01\u4e1a\u5408\u4f5c\u3002"),o.a.createElement("p",null,"\u76ee\u524d\u516c\u53f8\u5df2\u7533\u8bf7\u4e2d\u56fd\u4e13\u522924\u9879,\u7f8e\u56fd\u4e13\u52291\u9879\uff0c\u5e76\u62e5\u6709\u4e00\u652f\u4ee5\u535a\u58eb\u3001\u7855\u58eb\u4e3a\u4e3b\u7684\u4f18\u79c0\u7814\u53d1\u56e2\u961f\uff0c\u5177\u6709\u8f83\u9ad8\u7684\u7814\u53d1\u80fd\u529b\u548c\u7ba1\u7406\u6c34\u5e73\uff0c\u73b0\u6709\u591a\u540d\u5458\u5de5\u66fe\u5728\u5916\u4f01\u4f5c\u4e3a\u6280\u672f\u9aa8\u5e72\uff0c\u627f\u4f20\u6b27\u7f8e\u8bbe\u8ba1\u5236\u9020\u7406\u5ff5\uff0c\u5e76\u91c7\u7528\u5148\u8fdb\u7684\u4ea7\u54c1\u751f\u547d\u5468\u671f\u7ba1\u7406\uff08PLM\uff09\uff0c\u91cd\u89c6\u4ea7\u54c1\u8d28\u91cf\uff0c\u4e3a\u516c\u53f8\u4ea7\u54c1\u7684\u6280\u672f\u5f15\u9886\u3001\u6280\u672f\u521b\u65b0\u548c\u516c\u53f8\u7684\u53ef\u6301\u7eed\u53d1\u5c55\u5960\u5b9a\u4e86\u575a\u5b9e\u57fa\u7840\u3002"))))}}]),n}(a.Component)),Ct=Object(S.b)(null,(function(e,t){return Object(p.a)(Object(p.a)({},t),{},{setTitle:function(){return e(q.apply(void 0,arguments))}})}))(Ot),jt=(n(293),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"appContent"},this.props.showHeader?o.a.createElement("div",{className:"headerMask"}):null,o.a.createElement(O.c,null,o.a.createElement(O.a,{path:"/",component:fe,exact:!0}),o.a.createElement(O.a,{path:"/setting**",component:mt,exact:!0}),o.a.createElement(O.a,{path:"/address",component:vt,exact:!0}),o.a.createElement(O.a,{path:"/logs",component:yt,exact:!0}),o.a.createElement(O.a,{path:"/about",component:Ct,exact:!0})),o.a.createElement("div",{className:"tabBarMask"}))}}]),n}(a.Component)),wt=Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{showHeader:e.showHeader})}),null)(jt),Nt=(n(294),n(107)),It=n.n(Nt),Tt=(n(299),n(150)),Pt=n.n(Tt),xt=(n(301),["Enable","Disable","Cancel"]),Dt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={popoverVisible:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(!this.props.showHeader)return null;var t=this.props.title;return o.a.createElement("div",{className:"appHeader"},o.a.createElement(Pt.a,{leftContent:o.a.createElement(Ce.a,{type:"left",onClick:function(){return e.onBackClick()}}),rightContent:this.rightContent(),mode:"light"},t))}},{key:"rightContent",value:function(){var e=this,t=this.state.popoverVisible,n=It.a.Item;return o.a.createElement(It.a,{mask:!0,visible:t,overlay:[o.a.createElement(n,{key:"about",value:"about","data-seed":"logId"},"About"),o.a.createElement(n,{key:"settings",value:"settings",style:{whiteSpace:"nowrap"}},"Settings"),o.a.createElement(n,{key:"reload",value:"reload",style:{whiteSpace:"nowrap"}},"Reload"),o.a.createElement(n,{key:"doZero",value:"reload",style:{whiteSpace:"nowrap"}},"ZeroAll"),o.a.createElement(n,{key:"compensation",value:"compensation",style:{whiteSpace:"nowrap"}},"Compensation")],onSelect:function(t){return e.onPopoverSelect(t)}},o.a.createElement(Ce.a,{type:"ellipsis"}))}},{key:"onBackClick",value:function(){this.props.history.goBack()}},{key:"onPopoverSelect",value:function(e){switch(e.key){case"about":this.props.history.push({pathname:"/about"});break;case"settings":this.props.history.push({pathname:"/setting/"});break;case"reload":this.doReloadSensors();break;case"doZero":this.showZeroAllConfirm();break;case"compensation":this.showCompensationOperations()}this.setState({popoverVisible:!1})}},{key:"showZeroAllConfirm",value:function(){L.a.alert("Zero All","Do zero for all sensors?",[{text:"Cancel"},{text:"Yes",onPress:function(){le().then((function(){N.a.show("Zero all success!",1,!1)}))}}])}},{key:"showCompensationOperations",value:function(){var e=this;ye.a.showActionSheetWithOptions({options:xt,title:"Compensation operations",cancelButtonIndex:xt.length-1,destructiveButtonIndex:1},(function(t){switch(xt[t]){case"Enable":e.doSetCompensationState(!0);break;case"Disable":e.doSetCompensationState(!1)}}))}},{key:"doSetCompensationState",value:function(e){(function(e){return Y({url:"/api/slot/_all-compensation",method:"post",data:{enableCompensation:e}})})(e).then((function(){var t=(e?"Enable":"Disable")+" Compensation Success!";N.a.show(t,1,!1)}))}},{key:"doReloadSensors",value:function(){L.a.alert("Reload Sensors","Reload sensors from database into weightService",[{text:"Cancel"},{text:"Yes",onPress:function(){J().then((function(){N.a.show("Reload Success!")}))}}])}}]),n}(a.Component),Bt=Object(O.f)(Object(S.b)((function(e,t){return Object(p.a)(Object(p.a)({},t),{},{title:e.globalTitle,showHeader:e.showHeader})}))(Dt)),Mt=n(151),Lt=Object(Mt.a)(),At=function(e){var t=function(e){return{type:"router.path.set",data:e}}({pathname:e.pathname,search:e.search,hash:e.hash});E.dispatch(t)};Lt.listen((function(e){At(e.location)})),At(Lt.location);var Ht=Lt,Rt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){E.dispatch(ne())}},{key:"render",value:function(){return o.a.createElement(ve.a,{history:Ht},o.a.createElement(S.a,{store:E},o.a.createElement("div",{className:"app-content"},o.a.createElement(Bt,null),o.a.createElement(wt,null),o.a.createElement(j,null))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.f5340812.chunk.js.map